"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[687],{6046:function(e,t,i){i.r(t),i.d(t,{default:function(){return $}});var s=i(4548),o=(i(1958),i(368),i(6742),i(6907)),n=(i(9071),i(8288)),a=(i(8008),i(8480)),r=(i(8093),i(8217)),l=(i(6870),i(6252)),c=i(6612);const d=e=>((0,l.dD)("data-v-f720221c"),e=e(),(0,l.Cn)(),e),h={class:"top-con"},g={class:"top-bar"},u={class:"input-area"},m=d((()=>(0,l._)("div",{class:"align-center",style:{color:"#262626","font-weight":"bold"}},"Login to get a discount coupon worth KHS120 ",-1))),v={class:"text-con"},_=d((()=>(0,l._)("div",{style:{color:"#262626"}},"+254-",-1))),p={class:"text-con"},w={slot:"button",class:"send-con"},f={key:1},y={style:{color:"#666666","margin-top":"10px"}},P=(0,l.Uk)(" If you can't receive the verification code, please use "),C={class:"align-center",style:{"padding-top":"7vw",position:"relative"}},k=(0,l.Uk)("Login to get loan amount "),T={class:"flex-r-center",style:{padding:"0px 4vw","margin-top":"4vw",color:"#BFBFBF"}},b=d((()=>(0,l._)("span",{style:{"margin-left":"5px"}},"login means you have read and agreed with",-1))),A={class:"pop-agreement-detail align-center"},D=["innerHTML"],S={key:0,class:"confirm-btn"},L=(0,l.Uk)(" Agree");function I(e,t,i,d,I,x){const O=r.JO,V=a.Ee,$=n.gN,W=o.zx,R=s.GI;return(0,l.wg)(),(0,l.iD)("div",h,[(0,l._)("div",g,[(0,l.Wm)(O,{name:"static/img/com_nav_ic_back_white.png",size:"26px",onClick:e._routerBack},null,8,["onClick"])]),(0,l._)("div",{style:(0,c.j5)({"background-image":"url(static/img/logon_banner_bg.png)"}),class:"login-bg"},[(0,l.Wm)(V,{style:{"margin-top":"20vw","margin-left":"4vw"},width:"61vw",src:"static/img/logon_banner_title.png"})],4),(0,l._)("div",u,[m,(0,l._)("div",v,[_,(0,l.Wm)($,{modelValue:I.userPhone,"onUpdate:modelValue":t[0]||(t[0]=e=>I.userPhone=e),maxlength:"10",type:"digit",class:"txt-field",placeholder:"Please enter your mobile numbe",onBlur:x.userPhoneBlur,onFocus:x.userPhoneFocus},null,8,["modelValue","onBlur","onFocus"])]),(0,l._)("div",p,[(0,l.Wm)($,{modelValue:I.verCode,"onUpdate:modelValue":t[2]||(t[2]=e=>I.verCode=e),class:"txt-field",maxlength:"4",type:"digit",placeholder:"Please enter your OTP",onChange:x.onVerCodeChange},{default:(0,l.w5)((()=>[(0,l._)("div",w,[I.sendAble?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"send-btn",onClick:t[1]||(t[1]=e=>x.sendVerCode(1))},"OTP")):((0,l.wg)(),(0,l.iD)("div",f,(0,c.zw)(I.verCountDown)+"s",1))])])),_:1},8,["modelValue","onChange"])]),(0,l._)("div",y,[P,(0,l._)("span",{onClick:t[3]||(t[3]=e=>x.sendVerCode(2)),class:"voice-click"},"voice message")])]),(0,l._)("div",C,[(0,l.Wm)(V,{style:{position:"absolute",top:"4vw",right:"6vw","z-index":"200"},width:"100px",src:"static/img/logon_tip_upto.png"}),(0,l.Wm)(W,{round:"",class:"submit-btn",style:{width:"92vw"},disabled:!x.inputValid,onClick:x.onLoginClick},{default:(0,l.w5)((()=>[k])),_:1},8,["disabled","onClick"])]),(0,l._)("div",T,[(0,l.Wm)(O,{onClick:t[4]||(t[4]=e=>I.agreeChecked=!I.agreeChecked),size:"22px",name:I.agreeChecked?"static/img/apply_loan_checkbox_sel.png":"static/img/apply_loan_checkbox_nor.png"},null,8,["name"]),b]),(0,l._)("div",{onClick:t[5]||(t[5]=(...e)=>x.onClickPrivacy&&x.onClickPrivacy(...e)),class:"privacy-txt"},"PRIVACY POLICY"),(0,l.Wm)(R,{modelValue:I.showPrivacyPop,"onUpdate:modelValue":t[6]||(t[6]=e=>I.showPrivacyPop=e),round:"",closeable:""},{default:(0,l.w5)((()=>[(0,l._)("div",A,[(0,l._)("div",{style:{height:"80vh",overflow:"scroll",padding:"4vw 4vw 15vw"},innerHTML:I.htmlPrivacyAgreementText},null,8,D),I.isReadPrivacyAgreement?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",S,[(0,l.Wm)(W,{onClick:x.onAgreeClick,class:"submit-btn",style:{width:"86vw"}},{default:(0,l.w5)((()=>[L])),_:1},8,["onClick"])]))])])),_:1},8,["modelValue"])])}i(7658);var x={name:"phone-login",computed:{inputValid(){return this.userPhone.length>8&&4==this.verCode.length}},data(){return{userPhone:"",verCode:"",sendAble:!0,verCountDown:0,verTimer:null,statistics:{sign_in_modify_phone:0,sign_in_enter_phone_times:0,sign_in_switch:0,sign_in_OTP_times:0,login_page_start_time:0,login_page_out_time:0},statisticsTempData:{focusStr:"",blurStr:"",focusTime:0,sendCodeTime:0,verCodeInputTime:0},codeType:1,agreeChecked:!1,showPrivacyPop:!1,isReadPrivacyAgreement:!1,htmlPrivacyAgreementText:""}},mounted(){this.statistics.login_page_start_time=Date.now()},unmounted(){this.verTimer&&clearInterval(this.verTimer)},methods:{onAgreeClick(){this.agreeChecked=!0,this.showPrivacyPop=!1,this.isReadPrivacyAgreement=!0,localStorage.setItem("isReadPrivacyAgreement",!0)},onClickPrivacy(){this.isReadPrivacyAgreement?this.agreeChecked=!this.agreeChecked:this.getPrivacyAgreement()},getPrivacyAgreement(){this._showLoading(),this.$http.get(this.$urls.agreement.APP_PRIVACY).then((e=>{this._dismissLoading(),this.htmlPrivacyAgreementText=e.data,this.showPrivacyPop=!0})).catch((e=>{this._dismissLoading()}))},sendVerCode(e){this.sendAble?this.userPhone.length<9?this._showToast("Phone Number Invalid!"):(this._showLoading(),this.$http.post(this.$urls.login.SEND_VER_CODE,{mobile:this.userPhone,type:e}).then((t=>{if(this._dismissLoading(),this.statisticsTempData.sendCodeTime=Date.now(),t.data.data){switch(e){case 1:this._event("K21"),this._showToast(this.$t("send_tip"));break;case 2:this._event("K25"),this._showIconToast(this.$t("voice_code_send_tip"),"toast-width");break}this.sendAble=!1,this.verCountDown=60,this.verTimer=setInterval((()=>{this.verCountDown--,this.verCountDown<=0&&(clearInterval(this.verTimer),this.sendAble=!0)}),1e3)}})).catch((e=>{this._dismissLoading(),e.msg&&this._showAlert(e.msg)}))):this._showToast(this.$t("send_retry_tip"))},saveForTest(e,t){!this._isApp()&&this._isTest()&&(this._saveLSObject("loginString",e),localStorage.setItem("salt",t),this._saveLSObject("paramString",{...this.$mock.TEST_COMMON_PARAMS,account_id:e.account_id,customer_id:e.customer_id,token:e.token}))},onLoginClick(){if(!this.agreeChecked)return this.getPrivacyAgreement(),void(this.isReadPrivacyAgreement=!1);this.statistics.login_page_out_time=Date.now(),this._event("K1-6"),this._showLoading(),this.$http.post(this.$urls.login.LOGIN_VER_CODE,{mobile:this.userPhone,verification_code:this.verCode}).then((e=>{this._dismissLoading();let t=e.data.data;if(t){let e=localStorage.getItem("salt");sessionStorage.clear(),localStorage.clear(),this.$dsBridge.call("syn.saveLoginInfo",JSON.stringify(t)),this.$store.commit("setLoginData",t),localStorage.setItem("loginTime",(new Date).getTime()),0==t.all_customer_type&&this.$dsBridge.callMain("uploadDeviceInfo",String(1)),this.saveForTest(t,e),this._event("K1-1"),this._event("XJ1");let i=[];for(let t in this.statistics)i.push({event_name:t,event_value:this.statistics[t]});this._postEventsList(JSON.stringify(i)),this._routeReplace("main")}})).catch((e=>{this._dismissLoading(),e.msg&&this._showAlert(e.msg)}))},replaceAfterAgreement(e){this.$router.push({name:"PermissionAgreePage",params:{url:this.$urls.agreement.APP_PRIVACY,replace:e,upload:!0}})},userPhoneBlur(){if(this.statisticsTempData.focusTime>0){let e=Date.now()-this.statisticsTempData.focusTime;this.statistics.sign_in_enter_phone_times+=e}this.statisticsTempData.focusStr!==this.userPhone&&this.statistics.sign_in_modify_phone++},userPhoneFocus(){this.statisticsTempData.focusTime=Date.now(),this.statisticsTempData.focusStr=this.userPhone},onVerCodeChange(){if(0==this.statisticsTempData.verCodeInputTime){this.statisticsTempData.verCodeInputTime=Date.now();let e=this.statisticsTempData.verCodeInputTime-this.statisticsTempData.sendCodeTime;this.statistics.sign_in_OTP_times=e}}}},O=i(3744);const V=(0,O.Z)(x,[["render",I],["__scopeId","data-v-f720221c"]]);var $=V},6870:function(e,t,i){i(1958),i(368),i(6742)},8480:function(e,t,i){i.d(t,{Ee:function(){return _}});var s=i(458),o=i(6252),n=i(2931),a=i(3759),r=i(8443),l=i(2639),c=i(1027),d=i(293),h=i(8217);const[g,u]=(0,a["do"])("image"),m={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:r.Or,height:r.Or,radius:r.Or,lazyLoad:Boolean,iconSize:r.Or,showError:r.J5,errorIcon:(0,r.SQ)("photo-fail"),iconPrefix:String,showLoading:r.J5,loadingIcon:(0,r.SQ)("photo")};var v=(0,o.aZ)({name:g,props:m,emits:["load","error"],setup(e,{emit:t,slots:i}){const s=(0,n.iH)(!1),a=(0,n.iH)(!0),r=(0,n.iH)(),{$Lazyload:g}=(0,o.FN)().proxy,m=(0,o.Fl)((()=>{const t={width:(0,l.Nn)(e.width),height:(0,l.Nn)(e.height)};return(0,c.Xq)(e.radius)&&(t.overflow="hidden",t.borderRadius=(0,l.Nn)(e.radius)),t}));(0,o.YP)((()=>e.src),(()=>{s.value=!1,a.value=!0}));const v=e=>{a.value&&(a.value=!1,t("load",e))},_=()=>{const e=new Event("load");Object.defineProperty(e,"target",{value:r.value,enumerable:!0}),v(e)},p=e=>{s.value=!0,a.value=!1,t("error",e)},w=(t,i,s)=>s?s():(0,o.Wm)(h.JO,{name:t,size:e.iconSize,class:i,classPrefix:e.iconPrefix},null),f=()=>a.value&&e.showLoading?(0,o.Wm)("div",{class:u("loading")},[w(e.loadingIcon,u("loading-icon"),i.loading)]):s.value&&e.showError?(0,o.Wm)("div",{class:u("error")},[w(e.errorIcon,u("error-icon"),i.error)]):void 0,y=()=>{if(s.value||!e.src)return;const t={alt:e.alt,class:u("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?(0,o.wy)((0,o.Wm)("img",(0,o.dG)({ref:r},t),null),[[(0,o.Q2)("lazy"),e.src]]):(0,o.Wm)("img",(0,o.dG)({ref:r,src:e.src,onLoad:v,onError:p},t),null)},P=({el:e})=>{const t=()=>{e===r.value&&a.value&&_()};r.value?t():(0,o.Y3)(t)},C=({el:e})=>{e!==r.value||s.value||p()};return g&&d._f&&(g.$on("loaded",P),g.$on("error",C),(0,o.Jd)((()=>{g.$off("loaded",P),g.$off("error",C)}))),(0,o.bv)((()=>{(0,o.Y3)((()=>{var e;(null==(e=r.value)?void 0:e.complete)&&_()}))})),()=>{var t;return(0,o.Wm)("div",{class:u({round:e.round,block:e.block}),style:m.value},[y(),f(),null==(t=i.default)?void 0:t.call(i)])}}});const _=(0,s.n)(v)},8093:function(e,t,i){i(1958),i(368),i(6742)}}]);